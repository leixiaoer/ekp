<?xml version="1.0" encoding="UTF-8"?>
<configs 
    xsi:schemaLocation="http://www.example.org/design-config ../../design.xsd " 
    xmlns="http://www.example.org/design-config" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <module 
        urlPrefix="/fssc/ledger/" 
        messageKey="fssc-ledger:module.fssc.ledger" 
        defaultValidator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)">
        <roles>
        	ROLE_FSSCLEDGER_DEFAULT;
			ROLE_FSSCLEDGER_IMPORT;
			ROLE_FSSCLEDGER_DELETE;
			ROLE_FSSCLEDGER_VIEW;	<!-- 台账查看权限 -->
			ROLE_FSSCLEDGER_CONTRACT_ADD;	<!-- 合同台账新建权限 -->
			ROLE_FSSCLEDGER_CONTRACT_VIEW;	<!-- 合同台账查看权限 -->
			ROLE_FSSCLEDGER_CONTRACT_EDIT;	<!-- 合同台账编辑权限 -->
			ROLE_FSSCLEDGER_CONTRACT_DELETE;	<!-- 合同台账删除权限 -->
			ROLE_FSSCLEDGER_MATERIAL_VIEW;	<!-- 物资台账查看权限 -->
       		ROLE_FSSCLEDGER_SETTING;	<!-- 台账后台设置权限 -->
        </roles>
        <request 
            path="tree.jsp*" 
            defaultValidator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
        <request 
            path="fssc_ledger_invoice/fsscLedgerInvoice.do*" 
            validatorParameter="recid=fdId,model=com.landray.kmss.fssc.ledger.model.FsscLedgerInvoice" 
            defaultValidator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)">
            <query 
                queryString="method=edit|update" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
            <query 
                queryString="method=delete|deleteall" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_DELETE)"/>
            <query 
                queryString="method=view" 
                validator="authFieldValidator(type=SYS_READER)|roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
        </request>
        <request 
            path="fssc_ledger_material/fsscLedgerMaterial.do*" 
            validatorParameter="recid=fdId,model=com.landray.kmss.fssc.ledger.model.FsscLedgerMaterial" 
            defaultValidator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)">
            <query 
                queryString="method=edit|update" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
            <query 
                queryString="method=delete|deleteall" 
                validator="roleValidator(role=ROLE_FSSCPURCH_DEMAND_DELETE)"/>
            <query 
                queryString="method=view" 
                validator="authFieldValidator(type=SYS_READER)"/>
        </request>
        <request 
            path="fssc_ledger_material_stock/fsscLedgerMaterialStock.do*" 
            validatorParameter="recid=fdId,model=com.landray.kmss.fssc.ledger.model.FsscLedgerMaterialStock" 
            defaultValidator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)">
            <query 
                queryString="method=edit|update" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
            <query 
                queryString="method=delete|deleteall" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
            <query 
                queryString="method=view" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)"/>
        </request>
        <request 
            path="fssc_ledger_contract/fsscLedgerContract.do*" 
            validatorParameter="recid=fdId,model=com.landray.kmss.fssc.ledger.model.FsscLedgerContract" 
            defaultValidator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)">
             <query 
                queryString="method=add" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_CONTRACT_ADD)"/>
            <query 
                queryString="method=add&amp;i.docTemplate=*" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_CONTRACT_ADD)&amp;authSimpleCategoryReaderValidator(cateId=i.docTemplate)"/>
            <query 
                queryString="method=edit"
                validator="authFieldValidator(type=creator)|roleValidator(role=ROLE_FSSCLEDGER_CONTRACT_EDIT)"/>
            <query 
                queryString="method=delete|deleteall" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_CONTRACT_DELETE)"/>
            <query 
                queryString="method=view" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)"/>
        </request>
        <request 
            path="fssc_ledger_credit/fsscLedgerCredit.do*" 
            validatorParameter="recid=fdId,model=com.landray.kmss.fssc.ledger.model.FsscLedgerCredit" 
            defaultValidator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)">
            <query 
                queryString="method=edit|update" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
            <query 
                queryString="method=delete|deleteall" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
            <query 
                queryString="method=view" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_DEFAULT)"/>
        </request>
    </module>
    <module 
        urlPrefix="/sys/transport/">
        <request 
            path="sys_transport_import/SysTransportImport*"/>
        <request 
            path="sys_transport_export/SysTransportExport*"/>
    </module>
    <module 
        urlPrefix="/sys/transport/">
        <request 
            path="sys_transport_import/SysTransportImport*">
            <query 
                queryString="fdModelName=com.landray.kmss.fssc.ledger.model.FsscLedgerInvoice" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
            <query 
                queryString="fdModelName=com.landray.kmss.fssc.ledger.model.FsscLedgerCredit" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
        </request>
        <request 
            path="sys_transport_export/SysTransportExport*">
            <query 
                queryString="fdModelName=com.landray.kmss.fssc.ledger.model.FsscLedgerInvoice" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_IMPORT)"/>
            <query 
                queryString="fdModelName=com.landray.kmss.fssc.ledger.model.FsscLedgerCredit" 
                validator="roleValidator(role=ROLE_FSSCLEDGER_SETTING)"/>
        </request>
	   <filters 
            modelName="com.landray.kmss.fssc.ledger.model.FsscLedgerInvoice">
            <filter 
                type="creator" 
                expression="authFieldFilter(field=docCreator.fdId)"/>
            <filter 
                type="SYS_READER" 
                expression="authFieldFilter(field=docCreator.fdId)"/>
            <filter 
                type="SYS_READER" 
                expression="roleFilter(role=ROLE_FSSCLEDGER_VIEW)"/>
        </filters>
        <filters 
            modelName="com.landray.kmss.fssc.ledger.model.FsscLedgerMaterial">
              <filter 
                type="SYS_READER" 
                expression="authFieldFilter(field=fdPurchase.fdId)"/>
            <filter 
                type="SYS_READER" 
                expression="roleFilter(role=ROLE_FSSCLEDGER_MATERIAL_VIEW)"/>
        </filters>
        <filters 
            modelName="com.landray.kmss.fssc.ledger.model.FsscLedgerContract">
            	<filter 
                type="creator" 
                expression="authFieldFilter(field=fdAgent.fdId)"/>
              <filter 
                type="SYS_READER" 
                expression="authFieldFilter(field=fdAgent.fdId)"/>
            <filter 
                type="SYS_READER" 
                expression="roleFilter(role=ROLE_FSSCLEDGER_CONTRACT_VIEW)"/>
        </filters>
    </module>
    <homePage
        messageKey="fssc-ledger:module.fssc.ledger" 
        urlPrefix="fssc/ledger" 
        url="/fssc/ledger/index.jsp" 
        config="/moduleindex_notopic.jsp?nav=/fssc/ledger/tree.jsp"/>
    <profileConfig 
        key="fssc/ledger" 
        messageKey="{fssc-ledger:module.fssc.ledger}" 
        url="/sys/profile/moduleindex.jsp?nav=/fssc/ledger/tree.jsp" 
        icon="km_comminfo" 
        type="fs"
        description="{fssc-ledger:module.fssc.ledger.description}"/>
</configs>
